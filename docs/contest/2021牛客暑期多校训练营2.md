# [2021牛客暑期多校训练营2]([2021牛客暑期多校训练营2_ACM/NOI/CSP/CCPC/ICPC算法编程高难度练习赛_牛客竞赛OJ (nowcoder.com)](https://ac.nowcoder.com/acm/contest/11253#question))

| 排名     | 当场过题数 | 至今过题数 | 总题数 |
| -------- | ---------- | ---------- | ------ |
| 105/1352 | 5          | 5          | 12     |

## **A**

**upsolved by **

### 题意



### 题解



## **B**

**upsolved by **

### 题意



### 题解



## **C**

**solved by JLK **

### 题意

给一个$n\times m$的格点图，每次可以选择一对四联通的点（没有被连过），连上一条边，要求不能构成封闭图形，不能操作者输。问先手输赢。

$1 \le n,m \le 4$

### 题解

游戏结束时最后一定构成一棵树，共$n\times m-1$条边，故判断其奇偶性即可。

## **D**

**solved by YZW **

### 题意



### 题解



## **E**

**upsolved by **

### 题意



### 题解



## **F**

**solved by JLK&YZW **

### 题意

给定$A,B,C,D$四个空间里的点，作$P_1,P_2$，满足$|AP_1|\ge |BP_1|,|CP_2|\ge |DP_2|$，求满足方案的$P_1,P_2$的交集的体积。

### 题解

这是阿波罗尼斯球，本质上是求两个球的交的面积。可以先计算得出圆心距离和两个半径。

#### Sol.1

用Simpson积分计算。在圆心连线上积分，积分函数为截面面积。

## **G**

**upsolved by **

### 题意



### 题解



## **H**

**upsolved by **

### 题意



### 题解



## **I**

**solved by JLK **

### 题意

两个$20\times 20$的迷宫，有障碍物和道路，各有一个人，各给定起点和终点（定点），四个方向同时控制两个人，碰到障碍物就不动，输出最小步数、方案以及路径。

### 题解

记录$20^4$的位置状态，BFS即可。

## **J**

**upsolved by **

### 题意



### 题解



## **K**

**solved by TYB **

### 题意

```
Stk is an empty stack
for i = 1 to n :
    while ( Stk is not empty ) and ( Stk's top > a[i] ) : 
        pop Stk
    push a[i]
    b[i]=Stk's size
```

给定某些$b_i$的取值，要求构造排列$a_i$，使以上面的方式得到$b_i$满足要求。或输出无解。

$n\le 10^6$

### 题解

先假设每次push的$a_i=i$，若$b_i$有要求，则一直做pop操作直至满足要求。然后此时需要把栈顶位置$+1$到$i-1$这段的$a_i+1$，用差分实现。（感觉不太讲得清楚，看代码吧）

## **L**

**upsolved by JLK**

### 题意

微信步数排行榜。有$n$个人，$m$对朋友关系，$q$个事件。每个事件中，有一个人步数增加了若干步。当一个人比他的所有朋友的步数都严格大时，他成为排行榜冠军。问每个人成为冠军的时间。

$1 \le n,m,q \le 2\times 10^5$

### 题解

可能算是套路题？

把度数按$\sqrt n$分类。对于度数小的点，每次可以直接更新周围的点。

而对于度数大的点，最多有$\sqrt n$个。可以直接更新周围的大点。

考虑在大点改变时更新小点。可以在小点更新的时候挂一个询问在大点上，如果大点某次更新使得步数超过了小点当前步数，就可以反过来更新小点。这可以用一个小顶堆来维护。

不需要删除操作，允许一个堆里面有不同时间的相同小点。因为更新是单调递增的，这样并不会错误。

堆里最多进入$n\sqrt n$个元素，复杂度合理。

注意这样更新有滞后性。在小点发生改变前的大点更新没有被记录到。因此小点改变的同时，还需要马上用所有大点更新这个小点。

记录时间，就是每次更新自己的时候记录一下时间，然后附近点更新的时候如果被顶下去就结束计时。

$O(n\sqrt nlog n)$

一个比较难理解的地方是，当大点连续更新两次时，有可能导致第二次没有更新到小点上。这其实已经被处理了。第二次没有更新到小点，说明第一次更新到小点了，已经比小点步数多了，计时结束，第二次可以暂时不用更新。而在小点又一次改变的时候才检查第二次更新，这时就把第二次记录了。

## **记录**

9min：JLK WA C (-1)

9min：JLK AC C

中间电脑出问题

20min：YZW AC D

75min：TYB AC K

101min：JLK AC I

138min：YZW WA F 怀疑是精度问题

之后改eps，换long double等方法皆失败

261min：JLK AC F 换了积分方法

## **总结**

TYB：开场开G，经历了假做法1、假做法2、暴力对拍发现结论错误的过程。原因是蜜汁自信和有点着急，过于凭感觉，找反例的能力也不高。即使是第一感觉很正确的东西也要小心。开题也不好，赛后也许发现其他的更可做。zzh建议的2h读完题应该做到。

## **Dirt**

C(-1):NO写成No

F(-5):积分方式不同导致精度误差

