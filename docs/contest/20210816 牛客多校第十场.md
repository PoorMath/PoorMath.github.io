# [2021牛客暑期多校训练营10](https://ac.nowcoder.com/acm/contest/11261)

| 排名                | 当场过题数 | 至今过题数 | 总题数 |
| ------------------- | ---------- | ---------- | ------ |
| 20/1015（校内2/18） | 4          | 5          | 11     |

## **A**

**solved by JLK**

### 题意

给$n$​​个字符串$A_i$​​，对于每个$i$​​，要求选出最小的字符串集合$S$​​​，使得$j \le i$​​时，$A_j$​​至少有一个前缀在$S$​​里，并且$j \gt i$​​时，$A_j$​​没有一个前缀在$S$​​里。求$S$​​的最小大小。

$1 \le n \le 10^5,1 \le len(A_i) \le 100$

空间限制32MB。

### 题解

如果没有空间限制，可以建一个Trie树，那么每个结点代表一个前缀，当子树里含有的所有字符串都需要有一个前缀时，就可以用这个结点来表示所有子树里的字符串。否则，就需要在子树里细分。可以用一个差分来解决。

问题是空间卡死了。可以使用SA中按Height从大到小合并建成一棵树的方法，建出来的树本质上类似与压缩后的Trie树。

由于长度很小，可以直接基数排序得到SA，枚举得到Height。然后建树计算即可。

$O(\sum len)$



## **B**

**upsolved by **

### 题意



### 题解



## **C**

**upsolved by **

### 题意



### 题解



## **D**

**upsolved by **

### 题意



### 题解



## **E**

**upsolved by **

### 题意



### 题解



## **F**

**solved by JLK**

### 题意

有$n$个点，他们有一个入栈出栈的序列。给定$n$个颜色（有可能重复），要给$n$个点分配颜色，使得每次有点入栈后，得到的栈的颜色序列都是不同的。

$1 \le n \le 10^6$

### 题解

很容易能够把这个入栈出栈的序列用树来表示。即每个点连到他入栈时的栈顶。

那么问题就变为给树染色，使得每个点的儿子颜色各不相同。

对于一个点的所有儿子，只需要选取剩余出现次数最多的几个颜色去染即可，这样一定是最可行的。如果染不够了，就是无解。可以用堆来维护剩余出现次数最多的颜色。

$O(n\log n)$

## **G**

**upsolved by TYB**

### 题意

$n$个人围成一圈，每个人独立随机地选择一名其他玩家并向其开一枪，开枪是同时的，被命中者立刻阵亡退出游戏。假设所有人的命中概率都为$p$，问恰好$k=0,1,2,\cdots,n$​个人存活的概率。

$n\le3\times10^5$

### 题解

设$g_i$为最后至少$i$人存活的概率，则$g_i=\tbinom{n}{i}(1-p+p\frac{n-i-1}{n-1})^{n-i}(1-p+p\frac{n-i}{n-1})^i$。

就是要选出$i$个人，然后每个人要么没有打中，要么没有打到这$i$个人。

设$f_i$为最后恰好$i$人存活的概率，则$f_i=\sum_{j=i}^n(-1)^{j-i}\tbinom{j}{i}g_j$。

可以通过二项式反演得到，也可以看做是容斥系数多带了一个组合数。

再化一下得到$f_i\times i!=\sum_{j=i}^n\frac{(-1)^{j-i}}{(j-i)!}j!g_j$，用NTT优化即可。

## **H**

**solved by YZW**

### 题意



### 题解



## **I**

**upsolved by **

### 题意



### 题解



## **J**

**solved by YZW**

### 题意



### 题解



## **K**

**upsolved by **

### 题意



### 题解



## **记录**

开局签H(0:11)。

JLK和TYB讨论后过F(0:46)。

TYB想G，但是式子推不出来。

不断换题后发现A可做，JLK过A(2:42)。

YZW写J(4:08)。

其余时间基本都在东想西想，都不会做。

## **总结**

JLK:这场大家都比较谨慎，所有题目都是1A，还是不错的。可能在计数题目方面需要加强训练。

## **Dirt**

无

