# [2021牛客暑期多校训练营6](https://ac.nowcoder.com/acm/contest/11257)

| 排名                | 当场过题数 | 至今过题数 | 总题数 |
| ------------------- | ---------- | ---------- | ------ |
| 46/1100（校内3/19） | 4          | 7          | 11     |

## **A**

**upsolved by **

### 题意



### 题解



## **B**

**upsolved by **

### 题意



### 题解



## **C**

**upsolved by YZW**

### 题意



### 题解



## **D**

**upsolved by TYB**

### 题意

一个游戏，开始时拥有的数是$0$，目标是将其变为$2^k-1$，每次随机以$p_i$的概率生成一个$[0,2^k)$的数$i$，设当前拥有的数是$x$，若$x\bigoplus i>x$，则将$x$变为$x\bigoplus i$，否则不变，求到达目标的期望次数。

$k\le 16$

### 题解

设$f_x$为$x$开始到结束的期望次数，容易写出转移方程：
$$
f_x=1+\sum_{y>x}f_yp_{x\bigoplus y}+\sum_{y\le x}f_xp_{x\bigoplus y}
$$
化简一下可以得到：
$$
f_x=\frac{1+\sum_{y>x}f_yp_{x\bigoplus y}}{\sum_{y>x}p_{x\bigoplus y}}
$$
那坨东西是个异或卷积的形式，容易想到用FWT之类的东西处理，但是有大小关系的限制。这时候有个套路是用分治来处理大小关系，类似分治FFT，对于$[l,r]$，先求出$[mid+1,r]$这一段$f$的值，在考虑它们对$[l,mid]$的影响，最后再递归$[l,mid]$这个区间。设一开始是第$0$层，当分治到第$i$层的时候，$[l,r]$这个区间的数二进制下前$i$位是完全相同的，所以可以不用每次都做满的FWT，复杂度是正确的，为$O(2^kk^2)$。

## **E**

**upsolved by **

### 题意



### 题解



## **F**

**solved by YZW&TYB**

### 题意



### 题解



## **G**

**upsolved by **

### 题意



### 题解



## **H**

**solved by JLK**

### 题意

二维平面内，有一只兔子，初始在一个格子内，每次可以往四个方向跳$d$格。有$n$​​个矩形，表示不能让兔子落在这些矩形内。求兔子可能的初始位置。

$1 \le n,d \le 10^5$

### 题解

可以把所有限制条件转化到一个$d\times d$的矩形内。

分类讨论，如果横纵坐标差值都大于等于$d$，那么肯定无解。有一个大于等于$d$，则会覆盖一整条。否则会被拆成几段。对$d$取模后分类拆成矩形，然后扫描线判断是否有没有被矩形覆盖的点即可。

$O(nlogn)$

## **I**

**solved by JLK**

### 题意

有一个环，给定若干不相交的区间，要求构造出一些区间，使得构造出的区间满足他们的交集恰好是给定区间的并集。

$1 \le n \le 1000$

### 题解

假设给定的区间覆盖的点是1，否则是0。那么可以让1被所有区间覆盖，0被少一个区间覆盖。也就是，对于所有0，在$[x+1,x-1]$（循环）放一个区间即可。

## **J**

**solved by TYB**

### 题意



### 题解



## **K**

**upsolved by TYB**

### 题意

给一棵$n$个节点的树，点有点权，$m$次询问，每次询问树上两点$(x,y)$​路径上，选择若干不相邻的点权值最大是多少。

$n\le5\times10^5,m\le10^7$

### 题解

就是猫树在树上问题拓展的裸题。

具体实现的时候，需要记录下点分树上每个点到子树内所有点的信息，这个不太好直接记录。考虑点分树的深度是$\log$级别的，所以可以直接记录每个点到它在点分树上的第$i$个祖先的信息。但这样有个问题，找到LCA后还要知道它是第几个祖先，这个理论上来说可以通过hash之类的做到$O(1)$，但参考了已通过的代码以及考虑常数问题，发现还是直接for一遍比较好，这部分其实可以当做常数。

## **记录**

开局看题，没有特别签到的。YZW看I，和TYB讨论了错误解法WA了两发。JLK改过来后T了一发才AC(0:37)。

TYB写F，WA1后AC(0:54)。

然后JLK写H，TYB和YZW讨论J。交了两发都WA了，本地写了个对拍和checker，但是由于随机数据过弱，没有对拍出来。YZW手造了一个数据，然后改对了。(1:51)

TYB写J，一发过(2:24)。

此时排名靠前，剩下C/D过的人比较多。但是C始终没有构造出来，D也没有想到。3h多一点时换题，TYB去莽K的log解法，毕竟有12s。JLK与YZW讨论E，想了个根号做法（赛后发现被出题人卡了）。

K一直TLE，卡常无果，直到结束。

## **总结**

JLK：不是特别签到的简单题还是需要几个人多验证一下。上次沈阳也是第二简单的题思路错了。还有K这种题看起来像是钓鱼的（12s，1e7），以后不会什么科技的话还是不要写了。

## **Dirt**

F(-1)

H(-2)

I(-3)

