# [2021牛客暑期多校训练营8](https://ac.nowcoder.com/acm/contest/11259)

| 排名                | 当场过题数 | 至今过题数 | 总题数 |
| ------------------- | ---------- | ---------- | ------ |
| 64/1357（校内6/19） | 5          | 6          | 11     |

## **A**

**solved by JLK**

### 题意

垃圾题意

### 题解

垃圾签到题

## **B**

**upsolved by JLK**

### 题意

有$n$个敌人，排成一列，每个人有生命$h_i$。有五种攻击方式：花费$m_i$对从前往后第$i$个敌人造成$d_i$伤害$(i \le 4)$，花费$m_E$对前四个敌人同时造成40000伤害。一个敌人被打倒后就从队列里消失。求打倒所有敌人的最小花费。

$1 \le n \le 20,1 \le d \le 20000,1 \le m \le 500,1 \le h \le 10^5$

### 题解

这种问题很难贪心，而且范围很小，考虑DP。

一个敌人被打倒的过程可能有单体伤害和全体伤害的混合。但是由数据范围，受到全体伤害一定不超过三次。如果知道这个人受到几次全体伤害，就可以剩下只考虑单体伤害。

而一个敌人可能受到的单体伤害和这个人在敌人队伍里的位置有关。假设在整个过程中，这个敌人先后在队伍的第4/3/1个位置。（由于全体伤害，敌人在某两次攻击之间变化的位置可能不是连续的。）

如果这个人最终是被单体伤害打倒的，那么可以看做是这个人受到若干次全体伤害，在1/3/4位置受到对应的单体伤害若干次，最终在1位置受到致命一击。

如果这个人最终是被全体伤害打倒的，那么可以看做是这个人受到若干次全体伤害，在1/3/4位置受到对应的单体伤害若干次，血量到达了40000以下，最后受到全体伤害而死。

由于$h \le 10^5$，可以预处理出对于指定血量、指定位置集合的条件下，上面两种情况的最少花费（只考虑单体伤害）。即：随便攻击的最小花费，和最后一击一定是在最小位置上的最小花费。

在DP中记录前四个敌人的编号，他们经过的位置集合，以及分别受到了多少全体伤害。

经过的位置集合可以用二进制表示，由于自己这一位已经确定，只需要记录之前经过了哪些位置，这可以用3+2+1+0=6个二进制位表示。受到全体伤害的次数不超过两次，只需要记录当前的前多少个人受到了一次和二次伤害。

这样状态一共是$n^4\times2^6\times 15$。由于$n$很小，可以实现。

考虑转移。对于第一种情况，每次可以枚举被打倒的敌人，通过预处理的数据算出花费。对于第二种情况，就是整体施加一次全体伤害，但此时不止有只受到全体伤害而死的敌人，也有先受到一些单体伤害，再受到全体伤害而死的敌人。那么可以枚举一次全体伤害打倒的敌人集合，对于目前还没倒的，通过预处理的数据算出让他倒的最小花费。

转移的时候也比较麻烦，需要模拟找到到下一个状态。

可以让最终状态为$n+1,n+2,n+3,n+4$四个敌人，这样最后统计答案方便，但是在转移的时候也要注意不能打倒大于$n$的敌人。

总复杂度就是$O(n^4\times 2^6\times 15\times 2^4+h\times 2^4)$，还有若干常数。

## **C**

**upsolved by **

### 题意



### 题解



## **D**

**solved by YZW**

### 题意



### 题解



## **E**

**solved by TYB**

### 题意

问$x$是否同时是质数和闰年。

### 题解

如果$x$是闰年，则$x$是$4$的倍数，所以不可能。

## **F**

**upsolved by JLK**

### 题意

有一个$n\times m$​的方格，0表示能走，1表示障碍物。$q$​次询问，每次询问只往右或只往下或往右往下都可以时，一个点能否到达另一个点。

$1 \le n,m \le 500,1 \le q \le 5 \times 10^5$

### 题解

使用分治解决，比较巧妙。

首先只往右、只往下的情况可以直接for一遍。剩下只有距离大于等于两行的情况。

对行数分治。在分治的时候，把询问存在某个刚好使得询问被切开的地方。

显然，从起点如果可以到终点，一定会经过分界线，而且经过的时候，一定经过mid和mid+1两行的同一列的格子。预处理出上半部分和下半部分通过向右向下可以到达哪些分界线上的列。

回答询问的时候只需要定位到这个区间，然后枚举分界线上的列，判断起点能否到达分界线上某个点，再到达终点。

预处理用bitset加速，可以做到$O(n^2mlogn/w)$，每个询问$O(qm)$。

## **G**

**upsolved by **

### 题意



### 题解



## **H**

**upsolved by **

### 题意



### 题解



## **I**

**upsolved by **

### 题意



### 题解



## **J**

**solved by JLK&TYB**

### 题意

给定一棵$n$个点的树，两个人分别站在$s$点和$t$点。轮流走路，每次必须走到旁边的没有被任何一个人走过的点，除非无路可走。每个人都要最大化自己走过的点数-对手走过的点数。求最优策略下先手的这个值的大小。

$1 \le n \le 5\times 10^5$

### 题解

首先肯定把$s \to t$的链抽出来，然后对于链上每个点预处理出往子树里走的最大距离。

考虑用$(i,j,0/1)$表示两人分别在链上$i,j$的位置，当前是先手还是后手动。假设先手动，那么每次要么在链里向对方的方向走一格，要么跳到这个点的子树里。

如果向对方走一格，就从$(i+1,j,1)$转移。如果走到子树里，那么先手不可能再在链上走了，后手可以在$[i+1,j]$这一段任意走一个最长的链。

后手同理。转移的时候，对于先手要取max，而对于后手由于要让后手的值最大，就要让先手的值最小，取min。一个区间上走一个最长的链实际上可以看做区间最值问题。而询问的区间又是两个端点单调的，可以暴力移动。

总状态数$O(n)$，时间复杂度也为$O(n)$。

## **K**

**solved by YZW**

### 题意



### 题解



## **记录**

TYB签E(0:07)。JLK不确定A的题意，尝试了一发WA。

YZW过D(0:38)。

随后一直讨论A的题意，没有搞懂，又试了一发WA。

YZW写K，没有考虑到一些情况，WA2后AC(1:19)。

JLK看了一万年A之后，发现$x=0$的条件，然后AC(1:28)。

然后JLK写J，一开始写法不对，WA1之后改过了(2:35)。

然后一起看F，YZW说了个假算法，都没有看出问题。结果调了2小时一直WA。后来对拍出错，才发现做法有问题。

还剩二十多分钟，TYB莽了个较为暴力的bitset写法，最后RE/TLE没调出来。

## **总结**

JLK:还是要学会判断做法的正确性。不过今天的F确实有点抽象，不好判断。

## **Dirt**

A(-2)

J(-1)

K(-2)

